import streamlit as st
import pandas as pd
import plotly.express as px
from datetime import datetime

st.set_page_config(page_title="Clinical Data Dashboard", layout="wide")

st.title("ğŸ¥ Clinical Data Dashboard")
st.markdown("Monitor and analyze clinical trial data")

# Sidebar
with st.sidebar:
    st.header("ğŸ“Š Data Upload")
    uploaded_file = st.file_uploader("Upload CSV", type=['csv'])
    
    st.header("âš™ï¸ Settings")
    sensitivity = st.slider("Sensitivity", 1, 10, 5)
    
    st.header("ğŸ” Filters")
    # Filters will go here

# Main area
if uploaded_file:
    df = pd.read_csv(uploaded_file)
    
    # Show metrics
    col1, col2, col3 = st.columns(3)
    col1.metric("Patients", len(df))
    col2.metric("Avg Age", f"{df['Age'].mean():.1f}")
    col3.metric("Records", df.shape[0])
    
    # Show data
    st.subheader("ğŸ“‹ Data Preview")
    st.dataframe(df)
    
    # Charts
    st.subheader("ğŸ“ˆ Visualizations")
    if 'Age' in df.columns:
        fig = px.histogram(df, x='Age', title='Age Distribution')
        st.plotly_chart(fig)
    
    # Download button
    csv = df.to_csv(index=False)
    st.download_button("ğŸ“¥ Download Data", csv, "clinical_data.csv")
else:
    st.info("ğŸ‘† Please upload a CSV file")